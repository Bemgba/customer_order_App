{% extends 'index.html' %} {% load static %} {% block title%} Add New Single Order {% endblock %} {% block body_block %}

<!-- Favicon -->
<link rel="shortcut icon" href="/static/public/img/PJ QUEST MINI-LOGO.png">

<!-- Tom-Select CSS -->
<link rel="stylesheet" href="/static/node_modules/tom-select/dist/css/tom-select.bootstrap4.css">

<!-- J-Query -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- Select-2 -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- CSS -->
<link rel="stylesheet" href="/static/public/graindashboard/css/graindashboard.css">

<style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    
    input[type=number] {
        -moz-appearance: textfield;
        /* Firefox */
    }
    
    .stepwizard-step p {
        margin-top: 10px;
    }
    
    .stepwizard-row {
        display: table-row;
        position: relative;
        /* change to relative positioning */
    }
    
    .stepwizard {
        display: table;
        width: 100%;
        position: relative;
    }
    
    .stepwizard-step button[disabled] {
        opacity: 1 !important;
        filter: alpha(opacity=100) !important;
    }
    
    .stepwizard-row:before {
        top: 14px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 100%;
        height: 1px;
        background-color: #ccc;
        z-order: 0;
    }
    
    .stepwizard-step {
        display: table-cell;
        text-align: center;
        position: relative;
    }
    
    .btn-circle {
        width: 30px;
        height: 30px;
        text-align: center;
        padding: 6px 0;
        font-size: 12px;
        line-height: 1.428571429;
        border-radius: 15px;
    }
</style>
{% comment %} </head> {% endcomment %} {% comment %}

<body class=""> {% endcomment %}


    <!-- Start Injecting Here -->
    <div class="py-4 px-3 px-md-4">
        <div class="card mb-3 mb-md-4">

            <div class="card-body">
                <!-- Breadcrumb -->
                <nav class="d-none d-md-block" aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="#">Orders</a>
                        </li>
                        <li class="breadcrumb-item active" aria-current="page">Add New Order</li>
                    </ol>
                </nav>
                <!-- End Breadcrumb -->

                <div class="mb-3 mb-md-4 d-flex justify-content-between">
                    <div class="h3 mb-0">Add New Order</div>
                </div>


                <!-- Form -->
                <div class="container">
                    <div class="stepwizard">
                        <div class="stepwizard-row setup-panel">
                            <div class="stepwizard-step col-xs-3">
                                <a href="#step-1" type="button" class="btn btn-success btn-circle">1</a>
                                <p><small>Customer & Invoice Details</small></p>
                            </div>
                            <div class="stepwizard-step col-xs-3">
                                <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a>
                                <p><small>Location Details</small></p>
                            </div>
                            <div class="stepwizard-step col-xs-3">
                                <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled">3</a>
                                <p><small>Package Details</small></p>
                            </div>
                            <div class="stepwizard-step col-xs-3">
                                <a href="#step-4" type="button" class="btn btn-default btn-circle" disabled="disabled">4</a>
                                <p><small>Pricing</small></p>
                            </div>
                        </div>
                    </div>

                    <form role="form" method = "post"  >

                        {% csrf_token %}

                        <!-- Customer & Invoice Details -->
                        <div class="panel panel-primary setup-content" id="step-1">
                            <div class="panel-heading">
                                <h3 class="panel-title">Customer & Invoice Details</h3>
                            </div>
                            <div class="panel-body">
                                <div class="form-row pb-2">

                                    <div class="form-group col-10 col-md-4">
                                        <label for="dateTime">Date & Time of Order</label>
                                        <input type="datetime-local" class="form-control" value="" id="dateTime" name="dateTime" placeholder="Date & Time of Registration" required>
                                    </div>

                                    {% comment %}
                                    <div class="form-group col-10 col-md-4">
                                        <label for="orderNumber">Order Number</label>
                                        <!-- Automatically generate the next available invoice number -->
                                        <input type="number" class="form-control" value="" id="orderNumber" name="orderNumber" placeholder="" required>
                                    </div> {% endcomment %}

                                    <div class="form-group col-8 col-md-4">
                                        <label for="branch">Branch</label>
                                        <select name="branch" id="branch" class="form-control" value required>
                                                <option value="Lekki" selected>Lekki</option>
                                            </select>
                                    </div>

                                </div>

                                <div class="form-row">
                                    <div class="form-group col-8 col-md-4">
                                        <label for="customerName">Customer's Name</label>
                                        <select id="customerName" class="form-control" value="" name="customerName" placeholder="Type in the Customer's name" required>
                                                <!-- Options are in JavaScript Below -->
                                            </select>
                                    </div>

                                    <div class="form-group col-8 col-md-4">
                                        <label for="phoneNumber">Pick-up Contact's Phone Number</label>
                                        <input type="tel" name="customerPhoneNumber" id="phoneNumber" class="form-control" required>
                                        <!-- Automatically fill with customer's phone number -->
                                    </div>

                                    <div class="form-group col-8 col-md-4">

                                        <label for="email">Pick-up Contact's E-mail Address</label>
                                        <input type="email" name="customerEmail" id="email" class="form-control">
                                        <!-- Automatically fill with customer's email address -->

                                    </div>

                                </div>


                                <button class="btn btn-primary nextBtn pull-right float-right rounded-pill px-7 mt-5" type="button">Next</button>
                            </div>
                        </div>
                        <!-- End Customer & Invoice Details -->

                        <!-- Location Details -->
                        <div class="panel panel-primary setup-content" id="step-2">
                            <div class="panel-heading">
                                <h3 class="panel-title">Location Details</h3>
                            </div>
                            <div class="panel-body">

                                <div class="form-row">

                                    <div class="form-group col-12 col-md-6">
                                        <label for="deliveryType">Delivery Type</label>
                                        <select name="deliveryType" id="deliveryType" class="form-control" placeholder="Select the Delivery Type" required>
        
                                                <!-- Options are in JavaScript Below -->
                                                
                                            </select>
                                    </div>

                                </div>

                                <div class="">
                                    <div class="form-group">
                                        <label for="pickupAddress">Pickup Address</label>
                                        <input type="text" name="pickupAddress" class="form-control" id="pickupAddress" value="{{ customer.customer_address }}" required>

                                    </div>

                                </div>

                                <div class="form-row mt-5">
                                    <div class="form-group col-12 col-md-6">
                                        <label for="pickupCity">Pickup City</label>
                                        <select id="pickupCity" class="form-control" name="pickupCity" placeholder="Select a Pickup City" onchange="fill()" value="{{ customer.customer_city }}" required>
                                                <!-- Options are in JavaScript Below -->
                                            </select>
                                    </div>
                                    <div class="form-group col-12 col-md-6">
                                        <label for="pickupTown">Pickup Town</label>
                                        <select id="pickupTown" class="form-control" value="" name="pickupTown" placeholder="Select a Pickup Town" value="{{ customer.customer_town }}" required>
                                                <!-- Options are in JavaScript Below -->
                                            </select>
                                    </div>
                                </div>

                                <div class="">
                                    <div class="form-group">
                                        <label for="deliveryAddress">Delivery Address</label>
                                        <input type="text" name="deliveryAddress" class="form-control" id="deliveryAddress" required>
                                    </div>

                                </div>

                                <div class="form-row mt-5">

                                    <div class="form-group col-12 col-md-6">
                                        <label for="deliveryCity">Delivery City</label>
                                        <select id="deliveryCity" class="form-control" name="deliveryCity" placeholder="Select a Delivery City" onchange="d_fill()" value="{{ receipient.receiver_city }}" required>
                                                <!-- Options are in JavaScript Below -->
                                            </select>
                                    </div>
                                    <div class="form-group col-12 col-md-6">
                                        <label for="deliveryTown">Delivery Town</label>
                                        <select id="deliveryTown" class="form-control" value="" name="deliveryTown" placeholder="Select a Delivery Town" value="{{ receipient.receiver_town }}" required>
                                                <!-- Options are in JavaScript Below -->
                                            </select>
                                    </div>
                                </div>

                                <div class="form-row mt-5">

                                    <div class="form-group col-10 col-md-4">
                                        <label for="receiverName">Receiver's Name</label>
                                        <input type="text" class="form-control" id="receiverName" name="receiverName" value="{{ receipient.receiver_name }}" required>
                                    </div>

                                    <div class="form-group col-10 col-md-4">
                                        <label for="receiverPhone">Receiver's Phone Number</label>
                                        <input type="tel" class="form-control" id="receiverPhone" name="receiverPhone" value="{{ receipient.receiver_phone }}" required>
                                    </div>

                                    <div class="form-group col-10 col-md-4">
                                        <label for="receiverEmail">Receiver's E-mail Address</label>
                                        <input type="email" class="form-control" id="receiverEmail" name="receiverEmail" value="{{ receipient.receiver_email }}" required>
                                    </div>
                                </div>

                                <button class="btn btn-primary nextBtn pull-right float-right rounded-pill px-7 mt-5" type="button">Next</button>
                            </div>
                        </div>
                        <!-- End Location Details -->

                        <!-- Package Details -->
                        <div class="panel panel-primary setup-content" id="step-3">
                            <div class="panel-heading">
                                <h3 class="panel-title">Package Details</h3>
                            </div>
                            <div class="panel-body">
                                <div class="form-row">
                                    <div class="form-group col-12 col-md-6">
                                        <label for="packageWeight">Package Weight (In Kg)</label>
                                        <input type="number" id="packageWeight" class="form-control" name="packageWeight" min="1" max="40" placeholder="Enter Package Weight (In Kg)" required>
                                    </div>
                                    <div class="form-group col-12 col-md-6">
                                        <label for="packageDescription">Package Description (Content)</label>
                                        <input maxlength="200" type="text" required="required" class="form-control" id="packageDescription" name="packageDescription" placeholder="Enter Package Description (Content)" />
                                    </div>
                                </div>


                                <button class="btn btn-primary nextBtn pull-right float-right rounded-pill px-7 mt-5" type="button">Next</button>
                            </div>
                        </div>
                        <!-- End Package Details -->

                        <!-- Pricing -->
                        <div class="panel panel-primary setup-content" id="step-4">
                            <div class="panel-heading">
                                <h3 class="panel-title">Pricing</h3>
                            </div>
                            <div class="panel-body">
                                <div class="row mt-5" id='sub-total'>
                                    <label for="subTotal" class="col-form-label col-10">Sub-total</label>
                                    <div class="input-group flex-nowrap col-2">
                                        <span class="input-group-text font-weight-bold" id="addon-wrapping">₦</span>
                                        <input type="number" id="subTotal" class="form-control" name="subTotal" aria-label="subTotal" aria-describedby="addon-wrapping" readonly>
                                        <!-- Automatically generated based on input on other parts of the form -->
                                    </div>
                                </div>
                                <div class="row mt-5">
                                    <label for="taxes" class="col-form-label col-10">VAT/Taxes</label>
                                    <div class="input-group flex-nowrap col-2">
                                        <span class="input-group-text font-weight-bold" id="addon-wrapping">₦‎</span>
                                        <input type="number" id="taxes" class="form-control" name="taxes" aria-label="taxes" aria-describedby="addon-wrapping">
                                    </div>
                                </div>
                                <div class="row mt-5">
                                    <label for="discounts" class="col-form-label col-10">Discount/Promo</label>
                                    <div class="input-group flex-nowrap col-2">
                                        <span class="input-group-text font-weight-bold" id="addon-wrapping">₦‎</span>
                                        <input type="number" id="discounts" class="form-control" name="discounts" aria-label="discounts" aria-describedby="addon-wrapping">
                                    </div>
                                </div>
                                <div class="row mt-5">
                                    <label for="invoiceTotal" class="col-form-label col-10">Invoice Total</label>
                                    <div class="input-group flex-nowrap col-2">
                                        <span class="input-group-text font-weight-bold" id="addon-wrapping">₦‎</span>
                                        <input type="number" id="invoiceTotal" class="form-control" name="invoiceTotal" aria-label="invoiceTotal" aria-describedby="addon-wrapping">
                                        <!-- Automatically generated based on input on other parts of the form -->
                                    </div>
                                </div>
                                <button class="btn btn-primary rounded-pill pull-right float-right mt-5" type="submit">SUBMIT</button>
                            </div>
                        </div>
                        <!-- End Pricing -->

                    </form>
                </div>

                <!-- End Form -->
            </div>
        </div>


    </div>


    <script src="/static/public/graindashboard/js/graindashboard.js"></script>
    <script src="/static/public/graindashboard/js/graindashboard.vendor.js"></script>
    <script src="/static/node_modules/tom-select/dist/js/tom-select.base.js"></script>

    <!-- Multi-Step Functionality -->
    <script>
        $(document).ready(function() {

            var navListItems = $('div.setup-panel div a'),
                allWells = $('.setup-content'),
                allNextBtn = $('.nextBtn');

            allWells.hide();

            navListItems.click(function(e) {
                e.preventDefault();
                var $target = $($(this).attr('href')),
                    $item = $(this);

                if (!$item.hasClass('disabled')) {
                    navListItems.removeClass('btn-success').addClass('btn-default');
                    $item.addClass('btn-success');
                    allWells.hide();
                    $target.show();
                    $target.find('input:eq(0)').focus();
                }
            });

            allNextBtn.click(function() {
                var curStep = $(this).closest(".setup-content"),
                    curStepBtn = curStep.attr("id"),
                    nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a").first(),
                    curInputs = curStep.find("input[type='text'],input[type='url']"),
                    isValid = true;

                $(".form-group").removeClass("has-error");
                for (var i = 0; i < curInputs.length; i++) {
                    if (!curInputs[i].validity.valid) {
                        isValid = false;
                        $(curInputs[i]).closest(".form-group").addClass("has-error");
                    }
                }

                if (isValid) nextStepWizard.removeAttr('disabled').trigger('click');
            });

            $('div.setup-panel div a.btn-success').trigger('click');
        });
    </script>
    <!-- End Multi-Step Functionality -->

    <!-- Dropdown Options (Customer Name) -->
    <script>
        new TomSelect('#customerName', {
            maxItems: 1,
            valueField: 'id',
            labelField: 'name',
            searchField: 'name',
            options: [
                // Replace these with registered customers' names
                {% for customer in customers %}
                {id: {{customer.id}}, name: "{{customer.customer_name}}" },
                {% endfor %}
            ],
            create: false,
            onChange: function(value) {
                let customerId = value;
                //Ajax call to server
                let xhr = new XMLHttpRequest();
                xhr.open("POST", '/get_customer_info/', true);
                xhr.setRequestHeader("Content-Type", "application/json");
                
                // add the csrf token to the headers
                let csrftoken = getCookie('csrftoken');
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        let customer = JSON.parse(xhr.responseText);
                        document.getElementById("phoneNumber").value = customer.phone;
                        document.getElementById("email").value = customer.email;
                        // document.getElementById("pickupAddress").value = customer.address;
                        // document.getElementById("pickupCity").value = customer.city;
                        // document.getElementById("pickupTown").value = customer.town;
                    }else {
                        // handling error cases
                    }
                };
                xhr.send(JSON.stringify({ 'customer_id': customerId }));
    
            }
        });
        
        //get csrf cookie
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                let cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    let cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

    </script>
    <!-- End Dropdown Options (Customer Name) -->

    <!-- Dropdown Options (Delivery Type) -->
    <script>
        new TomSelect('#deliveryType', {
            maxItems: 1,
            valueField: 'id',
            labelField: 'type',
            searchField: 'type',
            options: [{
                id: 1,
                type: 'Same-Day Delivery'
            }, {
                id: 2,
                type: 'Next-Day Delivery'
            }, {
                id: 3,
                type: 'Express Delivery'
            }],
            create: false
        });
    </script>
    <!-- End Dropdown Options (Delivery Type) -->

    <!-- Dropdown Options (Pickup City) -->
    <script>
        new TomSelect('#pickupCity', {
            maxItems: 1,
            valueField: 'value',
            labelField: 'city',
            searchField: 'city',
            options: [{
                value: 1,
                city: 'Lagos Mainland'
            }, {
                value: 2,
                city: 'Lagos Island'
            }],
            create: false
        });
    </script>
    <!-- End Dropdown Options (Pickup City) -->

    <!-- Dropdown Options (Pickup & Delivery Town) -->
    <script>
        const mainland = [
            'Yaba', 'Ojuelegba', 'Sabo', 'Surulere', 'Shomolu', 'Palmgrove', 'Onipanu', 'Masha', 'Lawanson', 'Ijesha', 'Ijora', 'Ilupeju', 'Iwaya', 'Akerele', 'Akoka', 'Aguda', 'Alagomeji', 'Ebute Metta', 'Jibowu', 'Bariga', 'Opebi', 'Oregun', 'Oshodi', 'Ogudu', 'Obanikoro', 'Ojota', 'Mende', 'Maryland', 'Ketu', 'Kosofe', 'Gbagada', 'Ilasamaja', 'Anthony Village', 'Alausa', 'Adeniyi Jones ', 'Ikeja', 'Ladipo', 'Mile 12', 'Mushin', 'Agidingbi', 'Ogba', 'Omole', 'Magodo 1', 'Magodo 2', 'Ojodu', 'Ojodu Berger', 'Ojodu grammer School', 'Agege', 'Apapa Olodi', 'Maza Maza', 'Mile 2', 'Satellite Town', 'Ajegunle', 'Amuwo Odofin', 'Festac', 'Alaba', 'Gowon', 'Dopemu', 'Isolo', 'Egbeda', 'Idi mangoro', 'Alagbado', 'Iyana ipaja', 'Ipaja', 'Abule egba', 'Ifako – Ijaiye', 'Ojo'
        ];

        const island = [
            'Tinubu Square', 'Victoria Garden City', 'Victoria Island', 'Oniru', 'Marina', 'Lekki', 'Lagos Island', 'Eti-Osa', 'Ikoyi', 'Obalende', 'Dolphin Estate', 'Ikota', 'Eleganza/Orchid Road', 'Addo Road', 'Badore', 'Abraham Adesanya', 'Sangotedo', 'Abijo', 'Awoyaya',
            'Addo Road', 'Badore', 'Abraham Adesanya', 'Sangotedo', 'Abijo', 'Awoyaya'];

        function fill() {

            let city = document.getElementById('pickupCity').value;
            let town = document.getElementById('pickupTown');

            if (city == 1) {
                town.innerHTML = "<option value= '' > Select Pickup Town </option>";
                for (let i = 0; i < mainland.length; i++) {
                    town.innerHTML = town.innerHTML + "<option value= " + "'" + mainland[i] + "'" + ">" + mainland[i] + "</option>"
                }
            } else if (city == 2) {
                town.innerHTML = "<option value= '' > Select Pickup Town </option>";
                for (let i = 0; i < island.length; i++) {
                    town.innerHTML = town.innerHTML + '<option value=' + "'" + island[i] + "'" + ">" + island[i] + "</option>"
                }
            } else {
                town.innerHTML = "<option value= '' > Select a City First </option>";
            }


        }


        function d_fill() {

            let d_city = document.getElementById('deliveryCity').value;
            let d_town = document.getElementById('deliveryTown');

            // const mainland = [
            //     'Yaba','Ojuelegba' ,'Sabo','Surulere','Shomolu','Palmgrove','Onipanu' ,'Masha' ,'Lawanson','Ijesha' ,'Ijora' ,'Ilupeju' ,'Iwaya' ,'Akerele' ,'Akoka','Aguda' ,'Alagomeji', 'Ebute Metta', 'Jibowu', 'Bariga', 'Opebi' ,'Oregun' ,'Oshodi','Ogudu','Obanikoro','Ojota' ,'Mende' ,'Maryland' ,'Ketu' ,'Kosofe','Gbagada' ,'Ilasamaja','Anthony Village','Alausa' ,'Adeniyi Jones ','Ikeja','Ladipo' ,'Mile 12' ,'Mushin','Agidingbi' ,'Ogba','Omole' ,'Magodo 1','Magodo 2','Ojodu','Ojodu Berger','Ojodu grammer School' ,'Agege', 'Apapa Olodi','Maza Maza' ,'Mile 2','Satellite Town' ,'Ajegunle' ,'Amuwo Odofin' ,'Festac','Alaba', 'Gowon', 'Dopemu' , 'Isolo', 'Egbeda', 'Idi mangoro', 'Alagbado', 'Iyana ipaja', 'Ipaja', 'Abule egba', 'Ifako – Ijaiye', 'Ojo'
            // ];

            // const island = [
            //     'Tinubu Square', 'Victoria Garden City', 'Victoria Island', 'Oniru', 'Marina', 'Lekki', 'Lagos Island', 'Eti-Osa', 'Ikoyi', 'Obalende', 'Dolphin Estate', 'Ikota', 'Eleganza/Orchid Road', 'Addo Road', 'Badore', 'Abraham Adesanya', 'Sangotedo', 'Abijo', 'Awoyaya'
            // ];

            if (d_city == 1) {
                d_town.innerHTML = "<option value= '' > Select Delivery Town </option>";
                for (let i = 0; i < mainland.length; i++) {
                    d_town.innerHTML = d_town.innerHTML + "<option value= " + "'" + mainland[i] + "'" + ">" + mainland[i] + "</option>"
                }
            } else if (d_city == 2) {
                d_town.innerHTML = "<option value= '' > Select Delivery Town </option>";
                for (let i = 0; i < island.length; i++) {
                    d_town.innerHTML = d_town.innerHTML + '<option value=' + "'" + island[i] + "'" + ">" + island[i] + "</option>"
                }
            } else {
                d_town.innerHTML = "<option value= '' > Select a City First </option>";
            }


        }
    </script>
    <!-- End Dropdown Options (Pickup & Delivery Town) -->

    <!-- Dropdown Options (Delivery City) -->
    <script>
        new TomSelect('#deliveryCity', {
            maxItems: 1,
            valueField: 'value',
            labelField: 'city',
            searchField: 'city',
            options: [{
                value: 1,
                city: 'Lagos Mainland'
            }, {
                value: 2,
                city: 'Lagos Island'
            }],
            create: false
        });
    </script>
    <!-- End Dropdown Options (Delivery City) -->

    <script>
        setInterval(updateam, 1500);
        var pickupLocation;
        var deliveryLocation;

        var pickupZone;
        var deliveryZone;

        var priceDisplay;


        var key;
        var price;
        var invoice;
        var tax;
        var discount;

        const zones = {

            'Tinubu Square': 'Zone 1',
            'Victoria Garden City': 'Zone 1',
            'Victoria Island': 'Zone 1',
            'Oniru': 'Zone 1',
            'Marina': 'Zone 1',
            'Lekki': 'Zone 1',
            'Lagos Island': 'Zone 1',
            'Eti-Osa': 'Zone 1',
            'Ikoyi': 'Zone 1',
            'Obalende': 'Zone 1',
            'Dolphin Estate': 'Zone 1',
            'Ikota': 'Zone 1',
            'Eleganza/Orchid Road': 'Zone 1',

            'Addo Road': 'Zone 1 (ii)',
            'Badore': 'Zone 1 (ii)',
            'Abraham Adesanya': 'Zone 1 (ii)',
            'Sangotedo': 'Zone 1 (ii)',
            'Abijo': 'Zone 1 (ii)',
            'Awoyaya': 'Zone 1 (ii)',

            'Yaba': 'Zone 2',
            'Ojuelegba': 'Zone 2',
            'Sabo': 'Zone 2',
            'Surulere': 'Zone 2',
            'Shomolu': 'Zone 2',
            'Palmgrove': 'Zone 2',
            'Onipanu': 'Zone 2',
            'Masha': 'Zone 2',
            'Lawanson': 'Zone 2',
            'Ijesha': 'Zone 2',
            'Ijora': 'Zone 2',
            'Ilupeju': 'Zone 2',
            'Iwaya': 'Zone 2',
            'Akerele': 'Zone 2',
            'Akoka': 'Zone 2',
            'Aguda': 'Zone 2',
            'Alagomeji': 'Zone 2',
            'Ebute Metta': 'Zone 2',
            'Jibowu': 'Zone 2',
            'Bariga': 'Zone 2',

            'Opebi': 'Zone 3',
            'Oregun': 'Zone 3',
            'Oshodi': 'Zone 3',
            'Ogudu': 'Zone 3',
            'Obanikoro': 'Zone 3',
            'Ojota': 'Zone 3',
            'Mende': 'Zone 3',
            'Maryland': 'Zone 3',
            'Ketu': 'Zone 3',
            'Kosofe': 'Zone 3',
            'Gbagada': 'Zone 3',
            'Ilasamaja': 'Zone 3',
            'Anthony Village': 'Zone 3',
            'Alausa': 'Zone 3',
            'Adeniyi Jones': 'Zone 3',
            'Ikeja': 'Zone 3',
            'Ladipo': 'Zone 3',
            'Mile 12': 'Zone 3',
            'Mushin': 'Zone 3',
            'Agidingbi': 'Zone 3',
            'Ogba': 'Zone 3',
            'Omole': 'Zone 3',
            'Magodo 1': 'Zone 3',
            'Magodo2': 'Zone 3',
            'ojodu': 'Zone 3',
            'ojodu Berger': 'Zone 3',
            'Ojodu grammer School': 'Zone 3',
            'Agege': 'Zone 3',

            'Apapa': 'Zone 4',
            'Olodi': 'Zone 4',
            'Maza Maza': 'Zone 4',
            'Mile 2': 'Zone 4',
            'Satellite Town': 'Zone 4',
            'Ajegunle': 'Zone 4',
            'Amuwo': 'Zone 4',
            'Odofin': 'Zone 4',
            'Festac': 'Zone 4',
            'Alaba': 'Zone 4',

            'Gowon': 'Zone 5',
            'Dopemu': 'Zone 5',
            'isolo': 'Zone 5',
            'Egbeda': 'Zone 5',
            'Idi mangoro': 'Zone 5',
            'Alagbado': 'Zone 5',
            'iyana ipaja': 'Zone 5',
            'Ipaja': 'Zone 5',
            'Abule egba': 'Zone 5',
            'Ifako – Ijaiye': 'Zone 5',

            'Ojo': 'Zone 6',
        };

        // Define the pricing for each combination of delivery and recipient zones
        const prices = {
            "Zone 1 to Zone 1": 1500,
            "Zone 1 to Zone 1 (ii)": 3000,
            "Zone 1 to Zone 2": 2000,
            "Zone 1 to Zone 3": 3000,
            "Zone 1 to Zone 4": 3500,
            "Zone 1 to Zone 5": 4000,
            "Zone 1 to Zone 6": 3500,
            "Zone 1 (ii) to Zone 2": 2500,
            "Zone 1 (ii) to Zone 3": 3000,
            "Zone 1 (ii) to Zone 4": 3500,
            "Zone 1 (ii) to Zone 5": 4000,
            "Zone 1 (ii) to Zone 6": 4500,
            "Zone 2 to Zone 1": 2000,
            "Zone 2 to Zone 1 (ii)": 2500,
            "Zone 2 to Zone 2": 1500,
            "Zone 2 to Zone 3": 2000,
            "Zone 2 to Zone 4": 2000,
            "Zone 2 to Zone 5": 2500,
            "Zone 2 to Zone 6": 3000,
            "Zone 3 to Zone 1": 3000,
            "Zone 3 to Zone 1 (ii)": 3000,
            "Zone 3 to Zone 2": 2000,
            "Zone 3 to Zone 3": 2000,
            "Zone 3 to Zone 4": 3000,
            "Zone 3 to Zone 5": 2500,
            "Zone 3 to Zone 6": 2500,
            "Zone 4 to Zone 1": 3500,
            "Zone 4 to Zone 2": 2000,
            "Zone 4 to Zone 3": 3000,
            "Zone 4 to Zone 4": 2000,
            "Zone 4 to Zone 5": 3000,
            "Zone 4 to Zone 6": 2000,
            "Zone 5 to Zone 1": 4000,
            "Zone 5 to Zone 1 (ii)": 4000,
            "Zone 5 to Zone 2": 2500,
            "Zone 5 to Zone 3": 2500,
            "Zone 5 to Zone 4": 3000,
            "Zone 5 to Zone 5": 2000,
            "Zone 5 to Zone 6": 2500,
            "Zone 6 to Zone 1": 3500,
            "Zone 6 to Zone 1 (ii)": 4500,
            "Zone 6 to Zone 2 ": 3000,
            "Zone 6 to Zone 3 ": 2500,
            "Zone 6 to Zone 4 ": 2000,
            "Zone 6 to Zone 5 ": 2500,
            "Zone 6 to Zone 6": 2000,
            
        };

        function updateam() {
            // Get the selected delivery and recipient locations
            pickupLocation = document.getElementById('pickupTown').value;
            deliveryLocation = document.getElementById('deliveryTown').value;

            // Define the zones for each location


            // Get the delivery and recipient zones
            pickupZone = zones[pickupLocation];
            deliveryZone = zones[deliveryLocation];


            // Get the element to display the calculated price
            priceDisplay = document.getElementById("subTotal");
            tax = document.getElementById("taxes");
            invoice = document.getElementById("invoiceTotal");
            discount = document.getElementById("discounts");

            // Add event listeners for the dropdown elements to update the price when a new location is selected



            key = `${pickupZone} to ${deliveryZone}`;
            price = prices[key];
            if (price) {
                priceDisplay.value = price;
                document.getElementById("taxes").addEventListener("change", function(){
                    tax.value = this.value;
                 });                 
                discount.value = 0;
                
                var weight = document.querySelector('#packageWeight').value;
                
                let shippingCost = 0;
                if (weight > 0 && weight <= 10) {
                    shippingCost=0.0;
                } else if (weight > 10 && weight <= 21) {
                    shippingCost = 1000.0;
                } else if (weight > 21 && weight <= 40) {
                    shippingCost = 1500.0;
                } else if (weight > 40) {
                    // Weight is more than 40, so display an error message
                    alert('Error: Weight cannot be more than 40 kg');
                  }

                //if (weight > 0 && weight <= 10) {
                //    shippingCost=0;
                //  } else if (weight > 10 && weight <= 21) {
                //    shippingCost = 1000;
                //  } else if (weight > 21 && weight <= 40) {
                //    shippingCost = 1500;
                //  } else {
                //    // Weight is more than 40, so display an error message
                //    alert('Error: Weight cannot be more than 40 kg');
                //  }
                var priceNum = Number(price);
                var taxNum = Number(tax.value);
                var discountNum = Number(discount.value);
                var shippingCostNum = Number(shippingCost);

                //invoice.value = price + tax.value - discount.value;
                invoice.value = priceNum + taxNum - discountNum + shippingCostNum;
                // } else {
                //     priceDisplay.innerHTML = "Invalid delivery or recipient location";
                // }  find announcement that used after login it is of beter use here
            }


        }
    </script>
    {% endblock %}
</body>